<%= image_tag("logo_white.png", class: "logo") %>
<div class="menu">
  <input type="button" id="zoomIn" title="Zoom in"/>
  <input type="button" id="zoomOut" title="Zoom out"/>
  <input type="button" id="moveLeft" title="Move left"/>
  <input type="button" id="moveRight" title="Move right"/>
  <input type="button" id="reset" title="Refresh timeline"/>
</div>
 
<div id="visualization"></div>
<script type="text/javascript">
  //render gpost widget
  function renderpost() {
    var p = document.getElementById('wid-post');
    if(p.style.display == 'block')
      p.style.display = 'none';
    else
      p.style.display = 'block';
  }

  function rendertweet() {
    var t = document.getElementById('wid-tweet');
    if(t.style.display == 'block')
      t.style.display = 'none';
    else
      t.style.display = 'block';
  }

  //html elements creation
  <% current_member.google_models.each do |post| %>
    var item<%= post.id %> = '<a onclick="renderpost();"> </a>';
  <% end %>
  <% current_member.twitter_models.each do |post| %>
    var item<%= post.id %> = '<a onclick="rendertweet();"> </a>';
  <% end %>
 
 
  // DOM element where the Timeline will be attached
  var container = document.getElementById('visualization');
 
  // Create a json evnt data set
  var items = new vis.DataSet([

    <% @current_member.google_models.each do |post| %>
    {id: <%= post.id %>, content: item<%= post.id %>, start: '<%= post.create_date %>', type: 'gpoint'},
    <% end %>
    <% @current_member.twitter_models.each do |post| %>
    {id: <%= post.id %>, content: item<%= post.id %>, start: '<%= post.create_date.to_s[0...10]+ "T" + post.create_date.to_s[11...19] + "Z" %>', type: 'tpoint'},
    <% end %>

  ]);
 
  // Create a Timeline
  var timeline = new vis.Timeline(container, items, options);
 
  // attach events to the navigation buttons
  document.getElementById('zoomIn').onclick    = function () { zoom(-0.2); };
  document.getElementById('zoomOut').onclick   = function () { zoom( 0.2); };
  document.getElementById('moveLeft').onclick  = function () { move( 0.2); };
  document.getElementById('moveRight').onclick = function () { move(-0.2); };
  document.getElementById('reset').onclick     = function () { <% GoogleModel.store_urls(current_member) %> ;
                                                               <% TwiterModel.store_urls(current_member) %> ;
                                                               window.location.reload(); };
</script>
 
<div class="widgets">
  <% current_member.twitter_models.each do |post| %>
    <div id="wid-tweet">
      <blockquote class="twitter-tweet" width="350"><a href="<%= post.urls %>"></a></blockquote>
    </div>
  <% end %>

  <% current_member.google_models.each do |post| %>
    <div id="wid-post">
      <div class="g-post" data-href="<%= post.urls %>"></div>
    </div>
  <% end %>
</div>
<div class="signout">
  <p>Hello <%= current_member.username %></p>
  <%= link_to "Sign out", destroy_member_session_path, :method => :delete %>
</div>